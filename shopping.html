<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shopping List</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
    background: #fafafa;
    color: #333;
  }

  h1 {
    text-align: center;
    margin-bottom: 15px;
  }

  button {
    display: block;
    width: 100%;
    padding: 16px;
    margin: 10px 0;
    background: #0077cc;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    transition: background 0.2s;
  }

  button:hover {
    background: #005fa3;
  }

  .summary {
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    margin-bottom: 20px;
  }

  .shopping-item {
    padding: 10px 15px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    margin-bottom: 8px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .shopping-item:hover {
    background: #f1f7ff;
  }

  .checked {
    text-decoration: line-through;
    color: gray;
    background: #e0e0e0 !important;
  }

  .meal-header {
    font-weight: bold;
    margin-top: 15px;
  }
</style>
</head>
<body>

<h1>Weekly Shopping List</h1>

<div class="summary" id="summary"></div>
<div id="shopping-list"></div>

<button onclick="exportList()">Export List</button>
<button onclick="goBack()">Return to Main Page</button>

<script>
// Example ingredients JSON (edit/add freely)
const ingredientsData = {
  "General Tso Chicken": ["Chicken breast", "Soy sauce", "Garlic", "Ginger", "Rice", "Cornflour", "Stem broccoli"],
  "Taco's": ["Minced beef/turkey","Taco shells","Taco mix", "Lettuce", "Cheddar cheese","Tomatoes","Sour cream"],
  "Pasta and Red Sauce": ["Rigatoni pasta", "Tomato sauce", "Mozzarella Cheese", "Garlic bread"],
  "Chicken Souvlaki": ["Chicken breast", "Lemon", "Garlic", "Tzatziki sauce", "Pita bread", "Olive olive", "Oregano", "Bell peppers", "Chips", "Tomatoes","Lettuce"],
  "Salad": ["Breaded chicken fillets", "Lettuce", "Cucumber", "Tomato", "Feta cheese", "Pomegranete", "eggs", "Ranch"],
  "Pizza": ["Pizzas"],
  "Rotisserie Chicken": ["Whole chicken", "Green beans", "Potatoes/Chips", "Gravy"],
  "Fish Burgers": ["Fish fillets", "Burger buns", "Franks hot sauce", "Cheese slices", "Lettuce", "Tomatoes", "Chips", "Asparagus"],
  "Bangers and Mash": ["Sausages", "Potatoes", "Butter", "Onion Gravy mix"],
  "Spaghetti Meatballs": ["Spaghetti", "Meatballs", "Capers", "Red sauce", "Mozzarella"],
  "Stir Fry": ["egg noodles", "chicken breast/shrimp","hoisin sauce","sugar snap peas","cashew nuts","honey","soy sauce","garlic","ginger"]
  "Jambalaya": ["rice","chicken thighs","chorizo","prawns","bell peppers","onion","celery","Jambalaya kit"],
  "Jerk Chicken": ["chicken thighs","jerk seasoning","lime","rice","coconut milk","Kidney beans","Sweetcorn"],
  "Cheddar Broccoli": ["broccoli","cheddar","butter","onion","garlic","flour","cream"],
};

function loadShoppingList() {
  const mealPlan = JSON.parse(localStorage.getItem('weeklyMealPlan'));
  if (!mealPlan) {
    document.getElementById('summary').innerText = "No meal plan found. Please go back and generate one!";
    return;
  }

  // Render summary
  let summaryHTML = "<strong>This Weekâ€™s Meals:</strong><br>";
  for (const [day, meal] of Object.entries(mealPlan)) {
    summaryHTML += `${day}: ${meal}<br>`;
  }
  document.getElementById('summary').innerHTML = summaryHTML;

  // Generate shopping list
  const listDiv = document.getElementById('shopping-list');
  listDiv.innerHTML = "";
  for (const [day, meal] of Object.entries(mealPlan)) {
    const header = document.createElement("div");
    header.className = "meal-header";
    header.textContent = `${day}: ${meal}`;
    listDiv.appendChild(header);

    const items = ingredientsData[meal] || ["Ingredients not listed yet"];
    items.forEach(ingredient => {
      const itemDiv = document.createElement("div");
      itemDiv.className = "shopping-item";
      itemDiv.textContent = ingredient;
      itemDiv.onclick = () => itemDiv.classList.toggle("checked");
      listDiv.appendChild(itemDiv);
    });
  }
}

function goBack() {
  window.location.href = "index.html";
}

function exportList() {
  const mealPlan = JSON.parse(localStorage.getItem('weeklyMealPlan')) || {};
  let exportText = "WEEKLY MEAL PLAN:\n";
  for (const [day, meal] of Object.entries(mealPlan)) {
    exportText += `${day}: ${meal}\n`;
    const items = ingredientsData[meal] || ["Ingredients not listed yet"];
    items.forEach(i => exportText += `  - ${i}\n`);
  }

  const blob = new Blob([exportText], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "shopping_list.txt";
  a.click();
}

loadShoppingList();
</script>

</body>
</html>


